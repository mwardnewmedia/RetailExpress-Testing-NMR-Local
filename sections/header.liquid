<header class="relative z-10" x-data="{ openMenu : false }">
  <nav class="flex bg-white border-gray-200 px-4 md:px-16 py-6 dark:bg-gray-800">
    <div class="flex w-full align-center justify-between">
      <div class="logo flex items-center order-last md:order-first flex-1 md:flex-none justify-center md:justify-start">
        <a href="/" title="Logo Link">
          {%- if settings.logo != blank -%}
            {% assign logo_width = settings.logo_width %}
            {%- assign logo_alt = settings.logo.alt | default: shop.name | escape -%}
            {{ settings.logo | image_url: width: logo_width | image_tag: alt: logo_alt, preload: true }}

          {%- else -%}
            <span class="h2">{{ shop.name }}</span>
          {%- endif -%}
        </a>
      </div>
    
 <script>
  window.MightyLocationSelectorConfig = {
    theme: 'light',          // 'light' or 'dark' (default: 'light')
    showHours: true,         // Show "open until" text (default: true)
    showCityState: true,     // Show city/state below location name (default: true)
    showPhone: true,         // Show clickable phone number (default: true)
    defaultLocationId: null  // Default location ID to pre-select
  };
</script>
<div id="mighty-location-selector"></div>
<script src="https://local.newmediaretailer.com/vendor/mighty/mighty-location-selector-widget.js" async></script>


      {% assign nav_menu = section.settings.menu %}
      {% assign linklist = linklists[nav_menu] %}
      {% if linklist %}
        <!-- Mobile Menu -->
        <div class="flex items-center md:hidden flex-1">
          <button
            @click="openMenu = !openMenu"
            data-collapse-toggle="navbar-default"
            type="button"
            class="inline-flex items-center p-2 w-10 h-10 justify-center text-sm text-gray-500 rounded-lg md:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600"
            aria-controls="navbar-default"
            aria-expanded="false"
          >
            <span class="sr-only">Open main menu</span>
            <svg class="w-5 h-5" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 17 14">
              <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M1 1h15M1 7h15M1 13h15"/>
            </svg>
          </button>
        </div>
        <div
          class="absolute top-0 right-0 bottom-0 left-0 backdrop-blur-sm z-10 md:hidden"
          id="mobile-nav"
          :hidden="!openMenu"
        >
          <ul class="font-medium flex flex-col p-4 md:p-0 mt-4 border border-gray-100 bg-white">
            {% for link in linklist.links %}
              {% assign target_blank = false %}
              {% if link.url contains 'cdn.shopify.com' %}
                {% assign target_blank = true %}
              {% endif %}
              <li>
                <a
                  href="{{ link.url }}"
                  class="block py-2 px-3"
                  aria-current="page"
                  {% if target_blank == true %}
                    target="blank"
                  {% endif %}
                >
                  {{- link.title -}}
                </a>
              </li>
            {% endfor %}
          </ul>
          <!-- Close Button -->
          <button @click="openMenu = !openMenu" class="absolute top-10 right-10">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke-width="1.5"
              stroke="currentColor"
              class="w-6 h-6"
            >
              <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" />
            </svg>
          </button>
        </div>
        <div class="flex items-center md:hidden header-icons order-last flex-1 justify-end">
          <div class="p-2 border rounded-full">
            <a href="tel:{{ settings.phone }}" title="Call Button">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
                stroke-width="1.5"
                stroke="currentColor"
                class="w-3 h-3"
              >
                <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 0 0 2.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 0 1-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 0 0-1.091-.852H4.5A2.25 2.25 0 0 0 2.25 4.5v2.25Z" />
              </svg>
            </a>
          </div>
          <div class="p-2 border rounded-full ml-2">
            <a href="mailto:{{ settings.email }}" title="Email Button">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
                stroke-width="1.5"
                stroke="currentColor"
                class="w-3 h-3"
              >
                <path stroke-linecap="round" stroke-linejoin="round" d="M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75" />
              </svg>
            </a>
          </div>
          <div class="p-2 border rounded-full ml-2">
            <a href="/a/pages/locations" title="Location Link">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
                stroke-width="1.5"
                stroke="currentColor"
                class="w-3 h-3"
              >
                <path stroke-linecap="round" stroke-linejoin="round" d="M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z" />
                <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1 1 15 0Z" />
              </svg>
            </a>
          </div>
        </div>

        <!-- Desktop Menu -->
        <ul class="hidden  md:flex flex-row space-x-6 justify-end items-center w-full">
          {% for link in linklist.links %}
            {% assign target_blank = false %}
            {% if link.url contains 'cdn.shopify.com' %}
              {% assign target_blank = true %}
            {% endif %}
            <li>
              <a
                href="{{ link.url }}"
                class="block"
                {% if target_blank == true %}
                  target="blank"
                {% endif %}
              >
                {{- link.title -}}
              </a>
            </li>
          {% endfor %}
        </ul>
      {% endif %}
    </div>
  </nav>
</header>

{% schema %}
{
  "name": "t:sections.header.name",
  "class": "section-header",
  "settings": [
    {
      "type": "color_scheme",
      "id": "section_color_scheme",
      "label": "t:sections.all.colors.label",
      "default": "background-1"
    },
    {
      "type": "select",
      "id": "logo_position",
      "options": [
        {
          "value": "left-nav-right",
          "label": "Left Nav Right"
        },
        {
          "value": "center-nav-below",
          "label": "Center Nav Below"
        }
      ],
      "default": "left-nav-right",
      "label": "t:sections.header.settings.logo_position.label",
      "info": "t:sections.header.settings.logo_help.content"
    },
    {
      "type": "link_list",
      "id": "menu",
      "default": "main-menu",
      "label": "Nav Menu"
    }
  ]
}
{% endschema %}
